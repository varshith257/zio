"use strict";(self.webpackChunkzio_site=self.webpackChunkzio_site||[]).push([[22698],{15680:(e,r,t)=>{t.d(r,{xA:()=>c,yg:()=>d});var n=t(96540);function a(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function i(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}function o(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?i(Object(t),!0).forEach((function(r){a(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):i(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}function l(e,r){if(null==e)return{};var t,n,a=function(e,r){if(null==e)return{};var t,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)t=i[n],r.indexOf(t)>=0||(a[t]=e[t]);return a}(e,r);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)t=i[n],r.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(a[t]=e[t])}return a}var s=n.createContext({}),p=function(e){var r=n.useContext(s),t=r;return e&&(t="function"==typeof e?e(r):o(o({},r),e)),t},c=function(e){var r=p(e.components);return n.createElement(s.Provider,{value:r},e.children)},u="mdxType",g={inlineCode:"code",wrapper:function(e){var r=e.children;return n.createElement(n.Fragment,{},r)}},h=n.forwardRef((function(e,r){var t=e.components,a=e.mdxType,i=e.originalType,s=e.parentName,c=l(e,["components","mdxType","originalType","parentName"]),u=p(t),h=a,d=u["".concat(s,".").concat(h)]||u[h]||g[h]||i;return t?n.createElement(d,o(o({ref:r},c),{},{components:t})):n.createElement(d,o({ref:r},c))}));function d(e,r){var t=arguments,a=r&&r.mdxType;if("string"==typeof e||a){var i=t.length,o=new Array(i);o[0]=h;var l={};for(var s in r)hasOwnProperty.call(r,s)&&(l[s]=r[s]);l.originalType=e,l[u]="string"==typeof e?e:a,o[1]=l;for(var p=2;p<i;p++)o[p]=t[p];return n.createElement.apply(null,o)}return n.createElement.apply(null,t)}h.displayName="MDXCreateElement"},77642:(e,r,t)=>{t.r(r),t.d(r,{assets:()=>s,contentTitle:()=>o,default:()=>g,frontMatter:()=>i,metadata:()=>l,toc:()=>p});var n=t(58168),a=(t(96540),t(15680));const i={id:"graphql-webservice",title:"ZIO Quickstart: Building GraphQL Web Service",sidebar_label:"GraphQL Web Service"},o=void 0,l={unversionedId:"guides/quickstarts/graphql-webservice",id:"guides/quickstarts/graphql-webservice",title:"ZIO Quickstart: Building GraphQL Web Service",description:"This quickstart shows how to build a GraphQL web service using ZIO. It uses",source:"@site/docs/guides/quickstarts/graphql-webservice.md",sourceDirName:"guides/quickstarts",slug:"/guides/quickstarts/graphql-webservice",permalink:"/guides/quickstarts/graphql-webservice",draft:!1,editUrl:"https://github.com/zio/zio/edit/series/2.x/docs/guides/quickstarts/graphql-webservice.md",tags:[],version:"current",frontMatter:{id:"graphql-webservice",title:"ZIO Quickstart: Building GraphQL Web Service",sidebar_label:"GraphQL Web Service"},sidebar:"guides-sidebar",previous:{title:"RESTful Web Service",permalink:"/guides/quickstarts/restful-webservice"},next:{title:"Making a ZIO application configurable",permalink:"/guides/tutorials/configurable-zio-application"}},s={},p=[{value:"Running The Example",id:"running-the-example",level:2},{value:"Testing The Quickstart",id:"testing-the-quickstart",level:2}],c={toc:p},u="wrapper";function g(e){let{components:r,...t}=e;return(0,a.yg)(u,(0,n.A)({},c,t,{components:r,mdxType:"MDXLayout"}),(0,a.yg)("p",null,"This quickstart shows how to build a GraphQL web service using ZIO. It uses"),(0,a.yg)("ul",null,(0,a.yg)("li",{parentName:"ul"},(0,a.yg)("a",{parentName:"li",href:"https://zio.dev/zio-http/"},"ZIO HTTP")," for the HTTP server"),(0,a.yg)("li",{parentName:"ul"},(0,a.yg)("a",{parentName:"li",href:"https://ghostdogpr.github.io/caliban/"},"Caliban")," for the GraphQL")),(0,a.yg)("p",null,"Creating GraphQL API using Caliban is an easy process. We can define our data models using case classes and ADTs. Then Caliban can derive the whole GraphQL schema from these data models."),(0,a.yg)("h2",{id:"running-the-example"},"Running The Example"),(0,a.yg)("p",null,"First, open the console and clone the ",(0,a.yg)("a",{parentName:"p",href:"https://github.com/zio/zio-quickstarts"},"ZIO Quickstarts")," project using ",(0,a.yg)("inlineCode",{parentName:"p"},"git")," (or you can simply download the project) and then change the directory:"),(0,a.yg)("pre",null,(0,a.yg)("code",{parentName:"pre",className:"language-bash"},"$ git clone https://github.com/zio/zio-quickstarts.git\n$ cd zio-quickstarts/zio-quickstart-graphql-webservice\n")),(0,a.yg)("p",null,"Once you are inside the project directory, run the application:"),(0,a.yg)("pre",null,(0,a.yg)("code",{parentName:"pre",className:"language-bash"},"sbt run\n")),(0,a.yg)("p",null,"Alternatively, to enable hot-reloading and prevent port binding issues, you can use:"),(0,a.yg)("pre",null,(0,a.yg)("code",{parentName:"pre",className:"language-bash"},"sbt reStart\n")),(0,a.yg)("admonition",{type:"note"},(0,a.yg)("p",{parentName:"admonition"},'If you encounter a "port already in use" error, you can use ',(0,a.yg)("inlineCode",{parentName:"p"},"sbt-revolver")," to manage server restarts more effectively. The ",(0,a.yg)("inlineCode",{parentName:"p"},"reStart")," command will start your server and ",(0,a.yg)("inlineCode",{parentName:"p"},"reStop")," will properly stop it, releasing the port."),(0,a.yg)("p",{parentName:"admonition"},"To enable this feature, we have included ",(0,a.yg)("inlineCode",{parentName:"p"},"sbt-revolver")," in the project. For more details on this, refer to the ",(0,a.yg)("a",{parentName:"p",href:"https://zio.dev/zio-http/installation#hot-reload-changes-watch-mode"},"ZIO HTTP documentation on hot-reloading"),".")),(0,a.yg)("h2",{id:"testing-the-quickstart"},"Testing The Quickstart"),(0,a.yg)("p",null,"In this project, we have defined models of our employees with their names and roles. Then using GraphQL annotations, we asked Caliban to derive the GraphQL schema from these models."),(0,a.yg)("p",null,"So we can query all the employees that are software developers using the GraphQL query:"),(0,a.yg)("pre",null,(0,a.yg)("code",{parentName:"pre",className:"language-graphql"},"query {\n  employees(role: SoftwareDeveloper) {\n    name\n    role\n  }\n}\n")),(0,a.yg)("p",null,"To run this query, we can use any of the GraphGL clients or use the following curl command:"),(0,a.yg)("pre",null,(0,a.yg)("code",{parentName:"pre",className:"language-bash"},"curl 'http://localhost:8088/api/graphql' --data-binary '{\"query\":\"query{\\n employees(role: SoftwareDeveloper){\\n name\\n role\\n}\\n}\"}'\n")),(0,a.yg)("p",null,"The response will be as follows:"),(0,a.yg)("pre",null,(0,a.yg)("code",{parentName:"pre",className:"language-json"},'{\n  "data": {\n    "employees": [\n      {\n        "name": "Maria",\n        "role": "SoftwareDeveloper"\n      },\n      {\n        "name": "Peter",\n        "role": "SoftwareDeveloper"\n      }\n    ]\n  }\n}\n')))}g.isMDXComponent=!0}}]);